inf-yt.org.uk
=============

The INF-YT blog.


Setting up locally
------------------

This blog is static site, generated by [Hakyll][], so
requires `hakyll` to be installed locally:

```bash
cabal install hakyll
```

Compile/recompile the Hakyll binary on your system with

```bash
ghc --make hakyll.hs
./site rebuild
```

You can test the site locally by running `./hakyll preview`.


Adding posts
------------

Write posts in [Pandoc markdown][], and save them under `posts/pretty-url.md`.

Each post is preceded by a 'metadata block', where you *must* provide
`title`, `author`, and `date` fields.

```markdown
---
title: MY AWESOME POST ON DATA FREEDOM!!!
published: 2013-03-27
author: INF-YT
---

<!-- post content -->
```

After you've written a post, you can `git push` back up to GitHub.


Deploying
---------

Hakyll is now set to use `rsync` to copy its files up to the server with:

```bash
./hakyll deploy
```

The command it uses is `rsync -avz -e ssh ./_site/* inf-yt:/var/www/`
which assumes you have an entry for the `inf-yt` server in `~/.ssh/config`
configured like this:

```
Host inf-yt
    HostName        inf-yt.org.uk
    User            ubuntu
    IdentityFile    ~/.ssh/LAMP.pem
    IdentitiesOnly  yes
```
where `~/.ssh/LAMP.pem` is the private RSA key for `ubuntu@inf-yt.org.uk`.

<!-- references -->

[Hakyll]: http://jaspervdj.be/hakyll/
[templating]: http://jaspervdj.be/hakyll/tutorials/04-compilers.html#templates
[Pandoc markdown]: http://www.johnmacfarlane.net/pandoc/README.html#pandocs-markdown
[inf-yt]: http://inf-yt.org.uk/
